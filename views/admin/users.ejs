<div class="container">
    <div class="my-5 d-flex align-items-center justify-content-between">
      <form method="get" class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3">
        <div class="input-group mb-3">
          <input type="search" name="query" class="form-control form-control" placeholder="Search..." aria-label="Search">
          <button type="submit" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
              <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
            </svg>
          </button>
        </div>
      </form>
        <a href="/admin/user/add" class="btn btn-primary">Add User</a>
    </div>

    <table class="table">
        <thead>
          <tr>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Role</th>
            <th scope="col">Created</th>
            <th scope="col">Updated</th>
            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% for (let user of users) { %>
              <tr>
                  <td><%= user.username %></td>
                  <td><%= user.email %></td>
                  <td><%= user.role %></td>
                  <td><%= user.createdAt.toLocaleString() %></td>
                  <td><%= user.updatedAt.toLocaleString() %></td>
                  <td>
                      <a href="/admin/user/<%=user._id%>/edit" class="btn btn-warning">Edit</a>
                      <button onclick="deleteUser('<%= user._id %>')" class="btn btn-danger">Delete</button>
                  </td>
              </tr>
          <% } %>
      </tbody>
      </table>
</div>

<script>
  function deleteUser(userId) { 
    if(confirm("Are you sure you want to delete this user?")){
      window.location.href = `/admin/user/${userId}/delete?_method=DELETE`
    }
  }
</script>